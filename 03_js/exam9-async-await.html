<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>fetch로 데이터 가져오기</h1>
    <button onclick="loadData()">기사 읽기</button>
    <hr>
    <div id="result"></div>
    <script>
        // async 로 시작하는 함수를 실행해놓고 우리는 이 함수 안에 await 키워드를 적어놓은 동작을 완료할 때까지 
        // 인터프리터는 다른 일을 할 수 있습니다.
       
    async function loadData() {
        try {
            // 1부터 100 사이의 무작위 포스트 ID 생성 (API에 100개의 포스트가 있다고 가정)
            const postId = Math.floor(Math.random() * 100) + 1;

            // Fetch API를 사용하여 데이터 가져오기
            const response = await fetch('https://jsonplaceholder.typicode.com/posts/' + postId);

            if (!response.ok) { // 에러 처리
                throw new Error('데이터 로드 오류');
            }

            const data = await response.json();

            // 데이터를 페이지에 표시
            document.getElementById('result').innerHTML =
                '<h2>' + data.title + '</h2>' +
                '<p>' + data.body + '</p>';
        } catch (error) { // 에러 처리
            document.getElementById('result').innerHTML = error.message;
        }
    }
    </script>
</body>
</html>